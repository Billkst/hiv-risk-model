# HIV 真实数据分析报告

## 📊 数据概况

### 基本信息
- **数据文件**: `hiv数据.csv`
- **数据年份**: 2024年
- **区县数量**: 约 191 个区县
- **特征数量**: 约 130+ 个字段

### 数据结构

数据按照以下层次组织：

#### 1. 基础疫情数据
- 感染率
- 存活数
- 新报告病例数

#### 2. 年龄分布 (17个年龄段)
- 存活病例年龄构成: 0-, 5-, 10-, ..., 80-
- 新报告病例年龄构成: 0-, 5-, 10-, ..., 80-

#### 3. 传播途径 (8种)
- 同性传播
- 配偶阳性
- 商业性行为
- 非婚非商业
- 非婚未分类
- 注射毒品
- 母婴传播
- 其他或不详

#### 4. 治疗与检测
- 治疗覆盖率 (%)
- 30天治疗比例 (%)
- 检测比例 (%)
- 病毒抑制比例 (%)
- 病载小于50占现存活比例 (%)

#### 5. 高危人群干预数据
**暗娼 (FSW)**
- 月均估计数
- 月均干预人数
- 月均覆盖率
- HIV检测人数
- HIV检测阳性人数

**男男性行为者 (MSM)**
- 月均估计数
- 月均干预人数
- 月均覆盖率
- HIV检测人数
- HIV检测阳性人数

**吸毒者 (IDU)**
- 月均估计数
- 月均干预人数
- 月均覆盖率
- HIV检测人数
- HIV检测阳性人数

**性病就诊者**
- 干预人数
- HIV检测人数
- 本年累计HIV检测率
- HIV检测阳性人数

**外来务工人员**
- 月均估计数
- 月均干预人数
- 月均覆盖率
- HIV检测人数
- HIV检测阳性人数

**其他人群**
- 月均估计数
- 月均干预人数
- 月均覆盖率
- HIV检测人数
- HIV检测阳性人数

#### 6. 人群规模估计
- 注射吸毒者规模
- 城市MSM规模
- 暗娼规模
- 嫖客规模
- 农村MSM规模
- 移动评估MSM人数

#### 7. 筛查数据
- 人口数
- 筛查人次数
- 筛查覆盖率 (%)
- 筛查人数
- 按人数筛查覆盖率 (%)

#### 8. 公安挡获数据
- 挡获暗娼人次数
- 暗娼HIV检测阳性率
- 既往阳性暗娼数
- 挡获嫖客人次数
- 嫖客HIV检测阳性率
- 既往阳性嫖客数

#### 9. 风险评级
- 按方案评定级别 (1-3级)

---

## 🎯 数据特点

### 优势
1. **数据完整性高**: 涵盖疫情、治疗、干预、筛查等多维度
2. **真实性强**: 来自实际疾控系统数据
3. **特征丰富**: 130+ 个特征，信息量大
4. **分类明确**: 已有官方风险评级作为参考

### 挑战
1. **区县匿名化**: 无法对应具体地理位置（但不影响模型训练）
2. **数据不平衡**: 不同风险等级的区县数量可能不均
3. **缺失值**: 部分字段可能存在缺失
4. **量纲差异**: 不同特征的数值范围差异大

---

## 🔧 数据预处理建议

### 1. 数据清洗
```python
# 处理百分比字符串
df[col] = df[col].str.replace('%', '').astype(float)

# 处理缺失值
df = df.fillna(0)  # 或使用均值/中位数填充

# 处理异常值
df = df[(df['感染率'] >= 0) & (df['感染率'] <= 1)]
```

### 2. 特征工程
```python
# 创建复合特征
df['治疗效果指数'] = df['治疗覆盖率'] * df['病毒抑制比例']
df['高危人群覆盖率'] = (df['暗娼_月均覆盖率'] + df['MSM_月均覆盖率']) / 2

# 年龄分布特征
df['青壮年比例'] = df[['存活_20-', '存活_25-', '存活_30-', '存活_35-']].sum(axis=1)

# 传播途径主导类型
transmission_cols = ['存活_同性传播', '存活_配偶阳性', '存活_商业性行为']
df['主要传播途径'] = df[transmission_cols].idxmax(axis=1)
```

### 3. 特征标准化
```python
from sklearn.preprocessing import StandardScaler

scaler = StandardScaler()
X_scaled = scaler.fit_transform(X)
```

### 4. 创建风险标签
```python
# 基于感染率分级
df['risk_level'] = pd.cut(
    df['感染率'],
    bins=[0, 0.001, 0.005, 0.01, 0.05, 1.0],
    labels=[1, 2, 3, 4, 5]
)
```

---

## 📈 建议的建模策略

### 1. 特征选择
- **核心特征**: 感染率、存活数、新报告、治疗覆盖率
- **人群特征**: 高危人群规模、干预覆盖率
- **传播特征**: 主要传播途径比例
- **医疗特征**: 检测率、病毒抑制率

### 2. 模型选择
- **XGBoost**: 处理非线性关系
- **LightGBM**: 快速训练
- **Random Forest**: 特征重要性分析
- **Ensemble**: 集成多个模型

### 3. 评估指标
- Accuracy: 整体准确率
- F1-Score: 平衡精确率和召回率
- Confusion Matrix: 混淆矩阵
- Feature Importance: 特征重要性

---

## 🎓 下一步行动

1. **安装依赖**
   ```bash
   pip install pandas numpy scikit-learn xgboost lightgbm
   ```

2. **运行数据处理脚本**
   ```bash
   python utils/process_real_data.py
   ```

3. **训练模型**
   ```bash
   python models/model_trainer.py
   ```

4. **评估结果**
   - 查看准确率
   - 分析特征重要性
   - 生成可视化报告

---

## 📝 数据字段映射

| 原始字段 | 英文名称 | 数据类型 | 说明 |
|---------|---------|---------|------|
| 感染率 | prevalence_rate | float | 0-1之间 |
| 存活数 | survival_total | int | 现存活病例数 |
| 新报告 | new_cases | int | 新报告病例数 |
| 治疗覆盖率 | treatment_coverage | float | 百分比 |
| 检测比例 | testing_rate | float | 百分比 |
| 按方案评定级别 | official_risk_level | int | 1-3级 |

---

**生成时间**: 2024-12-XX  
**数据来源**: 四川省疾控中心  
**保密级别**: 已匿名化
