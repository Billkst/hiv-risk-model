# HIVé£é™©è¯„ä¼°æ¨¡å‹ - éƒ¨ç½²æ£€æŸ¥æ¸…å•

## ğŸ“‹ éƒ¨ç½²å‰æ£€æŸ¥

### 1. æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥

- [ ] æ¨¡å‹æ–‡ä»¶å­˜åœ¨ä¸”å®Œæ•´
  ```bash
  ls -lh saved_models/final_model_3to5.pkl
  # åº”è¯¥æ˜¾ç¤º ~1.1MB çš„æ–‡ä»¶
  ```

- [ ] APIä»£ç æ–‡ä»¶å®Œæ•´
  ```bash
  ls api/app.py models/enhanced_predictor.py
  ```

- [ ] ä¾èµ–æ–‡ä»¶å­˜åœ¨
  ```bash
  ls requirements.txt Dockerfile docker-compose.yml
  ```

- [ ] æ–‡æ¡£æ–‡ä»¶å®Œæ•´
  ```bash
  ls README.md USER_MANUAL.md API_DOCUMENTATION.md
  ```

### 2. ç¯å¢ƒæ£€æŸ¥

- [ ] Dockerå·²å®‰è£…
  ```bash
  docker --version
  # åº”è¯¥æ˜¾ç¤º Docker version 20.x.x æˆ–æ›´é«˜
  ```

- [ ] Docker Composeå·²å®‰è£…
  ```bash
  docker-compose --version
  # åº”è¯¥æ˜¾ç¤º docker-compose version 1.29.x æˆ–æ›´é«˜
  ```

- [ ] ç³»ç»Ÿèµ„æºå……è¶³
  ```bash
  free -h  # å†…å­˜ >= 4GB
  df -h    # ç£ç›˜ç©ºé—´ >= 10GB
  ```

- [ ] ç«¯å£å¯ç”¨
  ```bash
  netstat -tulpn | grep :5000
  # åº”è¯¥æ²¡æœ‰è¾“å‡ºï¼ˆç«¯å£æœªè¢«å ç”¨ï¼‰
  ```

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: æ„å»ºé•œåƒ

- [ ] æ„å»ºDockeré•œåƒ
  ```bash
  docker build -t hiv-risk-api:v1.1.0 .
  ```

- [ ] éªŒè¯é•œåƒåˆ›å»ºæˆåŠŸ
  ```bash
  docker images | grep hiv-risk-api
  ```

### æ­¥éª¤2: å¯åŠ¨æœåŠ¡

- [ ] å¯åŠ¨å®¹å™¨
  ```bash
  docker run -d -p 5000:5000 \
    -e USE_ENHANCED_MODEL=true \
    --name hiv-api \
    hiv-risk-api:v1.1.0
  ```

- [ ] æ£€æŸ¥å®¹å™¨çŠ¶æ€
  ```bash
  docker ps | grep hiv-api
  # çŠ¶æ€åº”è¯¥æ˜¯ "Up"
  ```

### æ­¥éª¤3: åŠŸèƒ½éªŒè¯

- [ ] å¥åº·æ£€æŸ¥é€šè¿‡
  ```bash
  curl http://localhost:5000/health
  # åº”è¯¥è¿”å› {"status": "healthy", ...}
  ```

- [ ] æ¨¡å‹ä¿¡æ¯æ­£ç¡®
  ```bash
  curl http://localhost:5000/v1/model/info
  # æ£€æŸ¥ model_version: "1.1.0"
  ```

- [ ] åŸºç¡€é¢„æµ‹åŠŸèƒ½æ­£å¸¸
  ```bash
  curl -X POST http://localhost:5000/v1/predict \
    -H "Content-Type: application/json" \
    -d '{"features": {"å­˜æ´»æ•°": 1000, "æ„ŸæŸ“ç‡": 0.5}}'
  # åº”è¯¥è¿”å›é¢„æµ‹ç»“æœ
  ```

- [ ] å¢å¼ºåŠŸèƒ½æ­£å¸¸
  ```bash
  curl -X POST http://localhost:5000/v1/predict \
    -H "Content-Type: application/json" \
    -d '{
      "features": {"å­˜æ´»æ•°": 1000, "æ„ŸæŸ“ç‡": 0.5},
      "include_contributions": true,
      "include_attention": true
    }'
  # åº”è¯¥è¿”å›åŒ…å«è´¡çŒ®åº¦å’Œæ³¨æ„åŠ›æƒé‡çš„ç»“æœ
  ```

---

## ğŸ” éƒ¨ç½²åéªŒè¯

### 1. æ€§èƒ½æµ‹è¯•

- [ ] å“åº”æ—¶é—´æµ‹è¯•
  ```bash
  time curl -X POST http://localhost:5000/v1/predict \
    -H "Content-Type: application/json" \
    -d '{"features": {"å­˜æ´»æ•°": 1000}}'
  # å“åº”æ—¶é—´åº”è¯¥ < 100ms
  ```

- [ ] å¹¶å‘æµ‹è¯•
  ```bash
  # ä½¿ç”¨abæˆ–å…¶ä»–å·¥å…·æµ‹è¯•å¹¶å‘æ€§èƒ½
  ab -n 100 -c 10 http://localhost:5000/health
  ```

### 2. ç¨³å®šæ€§æµ‹è¯•

- [ ] é•¿æ—¶é—´è¿è¡Œæµ‹è¯•
  ```bash
  # è¿è¡Œ24å°æ—¶ï¼Œæ£€æŸ¥å†…å­˜æ³„æ¼
  docker stats hiv-api
  ```

- [ ] é‡å¯æµ‹è¯•
  ```bash
  docker restart hiv-api
  sleep 10
  curl http://localhost:5000/health
  ```

### 3. æ—¥å¿—æ£€æŸ¥

- [ ] å¯åŠ¨æ—¥å¿—æ­£å¸¸
  ```bash
  docker logs hiv-api | head -20
  # æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯
  ```

- [ ] é¢„æµ‹æ—¥å¿—æ­£å¸¸
  ```bash
  # æ‰§è¡Œå‡ æ¬¡é¢„æµ‹åæ£€æŸ¥æ—¥å¿—
  docker logs hiv-api | tail -10
  ```

---

## ğŸ›¡ï¸ å®‰å…¨æ£€æŸ¥

### 1. ç½‘ç»œå®‰å…¨

- [ ] é˜²ç«å¢™é…ç½®
  ```bash
  # åªå¼€æ”¾å¿…è¦ç«¯å£
  sudo ufw allow 5000/tcp
  ```

- [ ] SSLè¯ä¹¦é…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
  ```bash
  # é…ç½®HTTPSï¼ˆå¦‚æœéœ€è¦ï¼‰
  ```

### 2. è®¿é—®æ§åˆ¶

- [ ] APIè®¿é—®é™åˆ¶
  ```bash
  # é…ç½®IPç™½åå•æˆ–APIå¯†é’¥ï¼ˆå¦‚æœéœ€è¦ï¼‰
  ```

- [ ] å®¹å™¨æƒé™æ£€æŸ¥
  ```bash
  docker inspect hiv-api | grep -i user
  ```

---

## ğŸ“Š ç›‘æ§è®¾ç½®

### 1. å¥åº·ç›‘æ§

- [ ] è®¾ç½®å¥åº·æ£€æŸ¥è„šæœ¬
  ```bash
  # åˆ›å»ºå®šæ—¶ä»»åŠ¡æ£€æŸ¥æœåŠ¡çŠ¶æ€
  */5 * * * * curl -f http://localhost:5000/health || echo "Service down"
  ```

### 2. èµ„æºç›‘æ§

- [ ] è®¾ç½®èµ„æºç›‘æ§
  ```bash
  # ç›‘æ§CPUã€å†…å­˜ä½¿ç”¨æƒ…å†µ
  docker stats hiv-api --no-stream
  ```

### 3. æ—¥å¿—ç›‘æ§

- [ ] é…ç½®æ—¥å¿—è½®è½¬
  ```bash
  # é…ç½®Dockeræ—¥å¿—è½®è½¬
  ```

---

## ğŸ“ æ–‡æ¡£æ£€æŸ¥

### 1. ç”¨æˆ·æ–‡æ¡£

- [ ] README.md å†…å®¹å‡†ç¡®
- [ ] USER_MANUAL.md å®Œæ•´
- [ ] API_DOCUMENTATION.md æœ€æ–°

### 2. è¿ç»´æ–‡æ¡£

- [ ] DEPLOYMENT_GUIDE.md è¯¦ç»†
- [ ] æ•…éšœæ’æŸ¥æŒ‡å—å®Œæ•´
- [ ] å¤‡ä»½æ¢å¤æµç¨‹æ¸…æ™°

---

## ğŸ”„ å¤‡ä»½å’Œæ¢å¤

### 1. æ•°æ®å¤‡ä»½

- [ ] æ¨¡å‹æ–‡ä»¶å¤‡ä»½
  ```bash
  cp saved_models/final_model_3to5.pkl /backup/
  ```

- [ ] é…ç½®æ–‡ä»¶å¤‡ä»½
  ```bash
  tar -czf config_backup.tar.gz *.yml *.txt *.md
  ```

### 2. æ¢å¤æµ‹è¯•

- [ ] éªŒè¯å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
- [ ] æµ‹è¯•æ¢å¤æµç¨‹

---

## âœ… éƒ¨ç½²å®Œæˆç¡®è®¤

### æœ€ç»ˆæ£€æŸ¥æ¸…å•

- [ ] æ‰€æœ‰åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡
- [ ] å®‰å…¨é…ç½®å®Œæˆ
- [ ] ç›‘æ§ç³»ç»Ÿå°±ç»ª
- [ ] æ–‡æ¡£æ›´æ–°å®Œæˆ
- [ ] å¤‡ä»½ç­–ç•¥å®æ–½
- [ ] ç”¨æˆ·åŸ¹è®­å®Œæˆ

### äº¤ä»˜ç¡®è®¤

- [ ] éƒ¨ç½²æ–‡æ¡£å·²äº¤ä»˜
- [ ] ç”¨æˆ·æ‰‹å†Œå·²äº¤ä»˜
- [ ] æŠ€æœ¯æ”¯æŒè”ç³»æ–¹å¼å·²æä¾›
- [ ] ç»´æŠ¤è®¡åˆ’å·²åˆ¶å®š

---

## ğŸ“ ç´§æ€¥è”ç³»

å¦‚æœéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·è”ç³»ï¼š

- **æŠ€æœ¯æ”¯æŒ**: support@example.com
- **ç´§æ€¥çƒ­çº¿**: 7Ã—24å°æ—¶æŠ€æœ¯æ”¯æŒ
- **æ–‡æ¡£åœ°å€**: é¡¹ç›®æ–‡æ¡£ç›®å½•

---

**æ£€æŸ¥æ¸…å•ç‰ˆæœ¬**: 1.0.0  
**é€‚ç”¨ç‰ˆæœ¬**: HIVé£é™©è¯„ä¼°æ¨¡å‹ v1.1.0  
**æœ€åæ›´æ–°**: 2025-11-04
